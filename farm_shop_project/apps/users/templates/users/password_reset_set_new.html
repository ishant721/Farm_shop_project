{% extends 'users/base_auth.html' %}
{% load static %}

{% block title %}Set New Password - Farm Shop{% endblock %}
{% block auth_title %}Set New Password{% endblock %}

{% block auth_content %}
<p class="text-center">Enter your new password below.</p>
<form method="post">
    {% csrf_token %}
    <div class="mb-3 position-relative">
        <label for="{{ form.new_password1.id_for_label }}" class="form-label">{{ form.new_password1.label }}</label>
        {{ form.new_password1 }}
        <span class="password-toggle-icon" onclick="togglePasswordVisibility('{{ form.new_password1.id_for_label }}')">
            <i class="fas fa-eye"></i>
        </span>
        {% if form.new_password1.errors %}<div class="text-danger small mt-1">{{ form.new_password1.errors }}</div>{% endif %}
    </div>
    <div class="mb-3 position-relative">
        <label for="{{ form.new_password2.id_for_label }}" class="form-label">{{ form.new_password2.label }}</label>
        {{ form.new_password2 }}
        {% if form.new_password2.errors %}<div class="text-danger small mt-1">{{ form.new_password2.errors }}</div>{% endif %}
    </div>
    {% if form.non_field_errors %}<div class="text-danger small mt-1">{{ form.non_field_errors }}</div>{% endif %}
    <button type="submit" class="btn btn-success w-100 mt-3">Set Password</button>
</form>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script src="{% static 'users/js/password_toggle.js' %}"></script>
{% endblock %}